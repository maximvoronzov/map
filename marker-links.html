<!DOCTYPE html>
<html>
<head>
  <script src='http://api.tiles.mapbox.com/mapbox.js/v0.6.5/mapbox.js'></script>
  <link href='http://api.tiles.mapbox.com/mapbox.js/v0.6.5/mapbox.css' rel='stylesheet' />
  <style>
    body { margin:0; padding:0; }
    #map { position:absolute; top:0; bottom:0; width:100%; }
  </style>
</head>
<body>
<div id='map'></div>
<script>
  // Create map
  mapbox.auto('map', 'aibram.map-gi4an4qh', function(map, tiledata) {
 
    // Replace marker factory function with our version
    tiledata.markers.factory(function(m) {
 
        // Create a marker using the simplestyle factory (default marker)
        var elem = mapbox.markers.simplestyle_factory(m);
        
        MM.addEvent(elem, 'click', function(e) {
 
            // Print marker properties
            // This contains all information (symbol, description)
            console.log(m);
 
            // Decide where to link using the marker properties
            var url = 'http://mapbox.com';
 
            // Link
            window.location.href = url;
        });
 
        return elem;
    });
  });
</script>
</body>
</html>