<!DOCTYPE html>
<html>
<head>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
  <script src='http://api.tiles.mapbox.com/mapbox.js/v1.3.1/mapbox.js'></script>
  <link href='http://api.tiles.mapbox.com/mapbox.js/v1.3.1/mapbox.css' rel='stylesheet' />
  <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
  <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  <!--[if lte IE 8]>
    <link href='http://api.tiles.mapbox.com/mapbox.js/v1.3.1/mapbox.ie.css' rel='stylesheet' >
  <![endif]-->
  <style>

    body { margin:0; padding:0; }
    #map {position: absolute; top:0; bottom:0; width:100%; }
    #bottomform{
        position:absolute;
        bottom: 10px;
        left:15px;
        height: 75px;
        width: 215px;
        background-color: #fff ;
        opacity: 0.6;
    }
    h3{
      margin: 0;
      font-family: Helvetica;
      text-align: center;
    }
    .hide{
      position: relative;
      top:0;
      right: 0;
      display: inline;
      margin-left: 170px;
    }
    #popform{
      margin-left: 20px;
      margin-right: 20px;
    }
  </style>
 
</head>
<body>
<div id='map'></div>
<div id="bottomform"><button onclick="bottomform(1)" class="hide">Hide</button>
    <h3>Name of the pin</h3>
   <input type="text" id="popform" name="popform" >
</div>

<script>
bottomform(1);
var map = L.mapbox.map('map','maximvoronzov.map-v3mu4cz0', { zoomControl: true })
    .setView([53.9, 27.57], 12);

function bottomform(a)
{
    if(a==1)
    document.getElementById("bottomform").style.display="none";
    else
    document.getElementById("bottomform").style.display="block";
}
 map.on('click', function(e) {
    bottomform(0);
    var lat = (e.latlng.lat);
    var lng = (e.latlng.lng);
    var newLatLng = new L.LatLng(lat, lng);
      var marker = L.marker(new L.LatLng(0,0), {
                icon: L.mapbox.marker.icon({'marker-color': '#71bc4e'}),
                draggable: true
            });
      marker.setLatLng(newLatLng);         
	 $(document).ready(function() {
					var text = $('#popform').val();		
          if (text!=0) {           
           marker.bindPopup(text);
           marker.addTo(map);	
           bottomform(1);
           $('#popform').val('');
          }			  
		 });
    
  });

</script>

</body>
</html>